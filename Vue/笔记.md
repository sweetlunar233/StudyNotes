# Vue3

> cnpm 是 npm 的镜像，安装速度快于 npm

软工实验所教的基本模板如下：（注意：下面是一个 `.html` 文件）

``` html
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<div id="app">
	<p>
        {{ message }}
    </p>
</div>

<script>
	const { createApp } = Vue
    
    createApp({
        data(){
            return{
                message:'Hello Vue!'
            }
        }
    })
</script>
```

## 创建项目

### vue/cli 创建

``` cmd
vue create 项目名
```

### vite 创建

通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目，语法格式如下：

``` cmd
npm init vite-app [项目名]
```

### vue ui 创建

除了使用 vue create 命令创建项目，我们还可以使用可视化创建工具来创建项目。

输入命令 `vue ui`，如下图：

![,](https://data.educoder.net/api/attachments/3931720?type=image/png)

打开浏览器输入地址 `http://localhost:8000/`，如下图： ![,](https://data.educoder.net/api/attachments/3931741?type=image/png)

点击"创建"选项来创建一个项目，选择底部"在此创建项目"，页面上方也可以选择路径 ![,](https://data.educoder.net/api/attachments/3931751?type=image/png)

然后输入我们的项目名称，选择包管理工具为 npm，然后点击下一步： ![,](https://data.educoder.net/api/attachments/3931762?type=image/png)

配置选择 Vue3 即可: ![,](https://data.educoder.net/api/attachments/3931773?type=image/png)

接下来就等待完成安装，安装完成管理界面如下：

![,](https://data.educoder.net/api/attachments/3931795?type=image/png)

## 目录结构

创建好项目后，进入文件夹，如下图： ![,](https://data.educoder.net/api/attachments/4061747?type=image/png)

会看到文件夹里面有一些文件和文件夹，这些又代表什么意思呢？

这里有三个文件夹，分别为 node_modules、public、src 。

- `node_modules`：npm 加载的项目依赖模块，配置 package.json 之后执行 `npm install` 后自动创建的文件夹；依赖的包通过 package.json 进行查看版本。
- `public`：公共资源目录。存放静态资源(img、js、css)等公共资源。public 目录下有两个文件，如下图所示，其中 favicon.ico 是 Vue 的图标，index.html 是 Vue3 的首页。

![,](https://data.educoder.net/api/attachments/4061814?type=image/png)

- `src`：开发目录，包含项目代码和逻辑代码。
  - assets：assets 放的图片资源，css等文件；
  - components：目录里面放了一个组件文件，可以不用。
  - App.vue：项目入口文件，程序初始运行文件；
  - main.js ：项目的核心文件。

目录中还有一些文件内容

- babel.config.js：里面是需要用到的插件。
- jsconfig.json ：指定了JavaScript 语言服务提供的功能的根文件和选项。
- package.json ：项目配置信息，依赖模块的定义。
- pack-lock.json：npm install 是按照这里的文档进行安装的。
- README.md：项目的说明文档，markdown 格式。
- vue.config.js ：可选的配置文件。

## 模板语法

### 文本插值

最基本的数据绑定形式是文本插值，它使用的是“Mustache”语法（即双大括号）：

``` vue
<template>
	<p>{{ msg }}</p>
</tempalte>

<script>
export default{
    data(){
        return{
            msg:"2333"
        } 
    }
}
</script>
```

### 使用 JavaScript 表达式

每个绑定仅支持**单一表达式**，也就是一段能够被求值的 JavaScript 代码。所谓能求值，一个简单的判断方法就是在 JavaScript 可以合法地写在 `return` 的后面。

``` vue
<!-- 双括号中的对象可以是表达式 -->
<template>
	<p>{{ number + 1 }}</p>
	<p>{{ ok ? 'YES' : 'NO' }}</p>
	<p>{{ message.split('').reverse().join('') }}</p>
</tempalte>

<script>
export default{
    data(){
        return{
            number:10,
            ok:true,
            message:"大家好"
        } 
    }
}
</script>
```

> 不可求值举例
>
> ``` vue
> <!-- 这是一个语句，而非表达式 -->
> {{ var a = 1 }}
> <!-- 这是好几行的，而非单行的（即单一表达式） -->
> {{ if(ok) {return message} }}
> ```

在 Vue 模板内，JavaScript 表达式可以被使用在如下场景上：

* 在文本插值中 (双大括号) 
* 在任何 Vue 指令 (以 `v-` 开头的特殊 attribute) attribute 的值中

### 原始 HTML

双括号会将数据插值为纯文本，而非HTML。若想插入 HTML，你需要使用 `v-html` 指令。

``` vue
<!-- 双括号中的对象可以是表达式 -->
<template>
	<p><span v-html="rawHtml"></p>
</tempalte>

<script>
export default{
    data(){
        return{
            rawHtml:"<a href='https://itbaizhan.com'>233</a>"
        } 
    }
}
</script>
```

以上渲染后会变成

``` vue
<p>
    <a href='https://itbaizhan.com'>233</a>
</p>
```

### 属性绑定

#### v-bind

双大括号不能在 HTML属性中使用。想要响应式地绑定一个属性，应该使用 `v-bind` 指令：

```html
<div v-bind:id="dynamicId"></div>
```

`v-bind` 指令指示 Vue 将元素的 `id` 属性与组件的 `dynamicId` 属性保持一致。如果绑定的值是 `null` 或者 `undefined`，那么该属性将会从渲染的元素上移除。

因为 v-bind 非常常用，我们提供了特定的简写语法：

```html
<div :id="dynamicId"></div>
```

#### 绑定class或style时

当用于绑定 class 或 style attribute，v-bind 支持额外的值类型如数组或对象，如下示例：

``` html
<div :class="{ red: isRed }"></div>
<div :class="[classA, classB]"></div>
<div :class="[classA, { classB: isB, classC: isC }]"></div>
<!-- style 绑定 -->
<div :style="{ fontSize: size + 'px' }"></div>
<div :style="[styleObjectA, styleObjectB]"></div>
```

代码示例如下：

``` html
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<style>
    .A{
        color:red
    }
    .classB{
        color:skyblue
    }
    .classC{
        color:green 
    }
</style>

<body>
<div id="app">
    <div :class="[classA, {classB: isB, classC: isC}]">我会变换颜色</div>
</div>
</body>

<script>
  var { createApp } = Vue
  var a=createApp({
    data() {
      return {
        classA: 'A',
        isB: false,
        isC: false
      }
    }
  });
  a.mount('#app')   
</script>
```

此时 html 渲染的结构为：

``` html
<div id="app" data-v-app="">
    <div class="A">我会变换颜色</div>
</div>
<script>...</script>
```

当输入 isB 的值为 true 时，此时 html 渲染的结构为：

``` html
<div id="app" data-v-app="">
    <div class="A classB">我会变换颜色</div>
</div>
<script>...</script>
```

#### 布尔型 Attribute

布尔型 attribute 依据 `true` / `false` 值来决定 attribute 是否应该存在于该元素上。disabled 就是最常见的例子之一。

v-bind 在这种场景下的行为略有不同：

``` html
<button :disabled="isButtonDisabled">Button</button>
```

当 `isButtonDisabled` 为**真值**或一个空字符串 (即 `<button disabled="">`) 时，元素会包含这个 `disabled` attribute。而当其为其他**假值**时 attribute 将被忽略。

#### 动态绑定多个值

如果你有像这样的一个包含多个 attribute 的 JavaScript 对象：

``` javascript
data() {
  return {
    objectOfAttrs: {
      id: 'container',
      class: 'wrapper'
    }
  }
}
```

通过不带参数的 v-bind，你可以将它们绑定到单个元素上：

``` html
<div v-bind="objectOfAttrs"></div>
```

 html 渲染的结构为：

``` html
<div id="app" data-v-app="">
    <div id="container" class="wrapper"></div>
</div>
<script>...</script>
```

#### v-model

为了简化双向绑定，Vue 提供了一个 v-model 指令，它实际上是上述操作的语法：

``` html
<input v-model="text">
```

v-model 不仅支持文本输入框，也支持诸如多选框、单选框、下拉框之类的输入类型。如下实例：

``` html
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<body>
<div id="app">
     <input v-model="text" placeholder="Type here">
     <p>{{ text }}</p>
</div>
</body>
<script>
  const { createApp } = Vue
  const a=createApp({
    data() {
      return {
        text: ''
      }
    }
  } 
  );
  a.mount('#app')   
</script>
```

效果图如下： ![,](https://data.educoder.net/api/attachments/4312604?type=image/gif)

